language: node_js
node_js:
  - "6"

before_install:
  - npm install -g gulp
  - gulp -v
  - wget https://releases.hashicorp.com/terraform/0.9.0/terraform_0.9.0_linux_amd64.zip -O /tmp/terraform.zip
  - sudo unzip -d /usr/local/bin/ /tmp/terraform.zip

install:
  - npm install

script:
  - gulp build
  - terraform init infra
  - terraform apply -var 'lambda_zip=dist/lambda.zip' infra

env:
  global:
    # AWS credentials
    - secure: U+PDZEiYCAS6U1vFtbdB9XtgNjwYrUue14QWd5FTu5KznemGNH9XyZy6J/eR3YzZKyPP7x3NtLXa85d9gOZ7eWo+qx8a6IjmZjKPaAEiQ78dSipEv+mFFMvBI3ZjZ8pdTqzYDkvCViXr+89KffqfFS43vPgVYDxFfzwat9fUMvnb08FPiHfaIlkPmmiuXaW2rwQrVYHy0w/vba3OJlNCJIjfxdwg7BH5bNNKDSupmnRq1SomROOhBVIh110YgYxGrkkPemjyK6fEhvHreOWiWvd0IZmUlwqMu8P6QrgJuxlY/2sdozTdkw/zXKHRU1aeZ3A0IOzodmDS4Uc157eLZXAwL4bMwk0TJ4PGNx/KjLbPwC/ujOpNU7POAv+72zoeiJy5wI1OA59yYvw5BaB982/NeMz2xOdxODKAc6K+Kp08vIx12NLjpSwLi8NyuLI/NkaAGHmPPRm64Ea7qRMvO3xULxBtVU6iJeWsb1n802iF2T7EnT3s0s51WL/nXXqZRqvqGLbFWz27PLE6naRhbAMrLlYXNU274gNhgMiNCqm4e8DJAQiMewHm1d4bCVrjtPXI3wh5Vb0u9XZa29DMqgiXQxl4qqRqlgYKpN5jYDEOqQ2qXomG06jgaTqBO2vZ5Y0I6jVkKjRNGSdKyEcMawtyD3LWRVar2Jxyk7ebOaI=
    - secure: ieyXK5UW+hOEvZM4j/tVQcpi4ija/opXa+1HoIpwhrwLy77UvIiEXmFnT2zEFBex5a1RsZCvD4pL0LNSyphsTeAgNnYaj327xGAPhmv+ybVubg05D8LsZS2+fNuYlq2i8ce/QGWdN5surIY0neka4ydI6nPqqHAn5Yacx2mDxHYhAV9YHzdzvp2HqtRiE8MC7oRIpOAmrxSN79XSKObZbBP69B1lCKmZM4Hep6Lb4+rfx9r39xIFkEj2JvQGPe4wvseeXFolNXiB6xa0jeWQwVti6rNeUEVOlsVMdEdMOBUcjlpIdGpn2ZfDKdpPH5/3tu8MxJ+sozBw4Wh7CK7JiYJSOA/wzXSRT+QI9DtEFthxKZhej2kyjyHVrZod+Lzk7mI12FuGQIHGAbJpRGyOeRYt5S8IEEVbecP2efU51en4mzyX5soTjkLh0cx7ja8toiMMsDrfiFKYh0s4m/QN6jKrsZuFQctOvS6e7wj4dxi4xNiNuaKLfqlWd1LVc1S9Xfm7LpPUNleunzQfUkyJ6K1mxHWMl/PUJ5krSW3W+R6cs5qo8dSCZUVKPHHTPO+RtNrERlsHaHXCsFe8XhVWGxfsZWVJwvPDseXahFjIUXiEktFuXeSrbcg92PSmIWjlC94zsIMstDd3KG1XUFy56+U+x15lsmtG3J6zf0pweT4=
    # TF_wallet_pw
    - secure: GdEW3mJoIRi4u5QQQNvMuiesrJjPY+ynoGfnZEHX127DlPN9R+XZ8B7NdfLbY3ywygelG3JR1xhmiC2LqrCPBXs+VULvKBBqGiAaLAoDvCWa/N73MfF9cWSq2pUIkU8/+L+yh8nqWFLh6sUL6RDsh3WtCwx8Eglg1QtRWAlNQcZaHxWKAhtv7J2+OfJVGdOtagCO1hqL9pbOwQGxg5uSGIqjm61v1WCNDLKQJOiXZIBeyzna5xsZZ9FrHd17tuEmPC5DfPzaxmxe4nMnuxLLNbH9QPGlxiiZwi4F1AVE3vxhNFtimB92vR0Cwnkzl9rYrZ2bg6cfqG0iuOisJaPPCWm4wgu/uizSF4UUH5VB5cmxAI3d+Tbcy48yUKPGvba3vZ4ojLLMr6ZyCT6QwnMSuIs3dKjOp4Jc0SokWSKZOo2HO45Qv/0ej5/BGoweiW9rkIukJIQMPNzdUxi4yCeOhnt+b9wYBMG4L3dHAxIKyzgsZW1LJYbI/Yj0eNINIVpkCLvjD2AQqK9fF91rtIteLpWRHrGiVPfQxKn53ejI1MyQ6FzO0IKbVIU+7ntEv+18kDF8KED86YnQDe4TKF25910M+38uYQDqGNf7KD34Yr7SI10nGaor8ghIbDM1gcD1X010zTdWKFdC9AAxMDwXcNPUEec+AkskqmSn3qu4kj0=
    # TF_wallet_merchant
    - secure: mqcAP4cQEFaJoyXciSUr96Q6Z0OSq46720EMcxSGboFKp3IfdXR8Niv0XGRLOdbnHZKTeZyqnf3R+CFyjEgx0AHVPnZB9yPQ6HBhlVf1GyZ1ae+WBdexXGdHHcwCTVcr2HLCuSvo4Q0Yi0hyJ4Bp9n8cTTeWm7fJywVnlFDeleum0aT3TX+NPWGyiFu6I41FsN7QJp6gUCItwOuq03RMXjU/ddgLtC070uMTN+1EQAIdqZYdNXfgVE5nBQU27TgRc7zAqnLAqEaPn5FKQ+2v48c9bqcTbw/fM7fayxatLeaZif4FLYbrWTsPP0pr7AuD13kTalt3/wac8ONzClGaRlmH7iIcOJYfDgbh8Zr/ZFmAPs2Sfc6uXUjhNXRCAjPMRlh1Y9rAhp9LEgKGRrFTGQgYKbXM92ueXwiBSQhUuIca+CGn2SdTMzd/TCQ4ThAvBvbPf70d//TlZGz8enxxedeJ9cQMPWQ+O2HmQhwFOSnElTKy/8H0qnSZbwv/VRXCLDgcKbFcgYrxEbhwvlWK/QtVFKuKiaNYKlM2vSnip6nSjZFfhfllqkqziYI65mH2qSuV2L+WOVRREExD+bbvH1qpQqZFJNTR0BfvDSegcH8qE0Wx29dXGhZTEQVvMG6HHQXNpcOPmQIKhiqp1dCg7agH/7rxepsr5NDnksd9mV8=
    # TF_firebase_user
    - secure: OSzHtK1CCSbL4TxdXhwQwtaSgNeaUpcXF7lHQ0VmTTd+WtdTCWnN8l7M5WXymDZ70Trmk/33ui71iSfhc2t+D42dIBF+71c6CeEQ1tcdlMZjS6hv7qGJ0f+NTL2jSxMcjsi8We/9epjSw5TXPkqNgSF73KxRm8rIv3UcvMZ0oQ2f4ApIlTNTZ8lCH+hWnQtqDczEPliEq1SNkHoXClg6HME7Bw2xDFaBytob39q0afLhNtORRYywSV9k+uogyb7/SuRAvngJdges3VT3w+5XhYJf8DPFdtb4xKAXQJ0DqfTFttbi4V0Hx3KIh6kPzgERCdnPShS55+YQhNSoHOLf4jKFP1Tf9YbiWC3kGDeafmDhrrvnZ0GaK46EmiqloNmCUoZIb7wm4TjaRkUDaAzHEvMdZomtp9AS9vwvD8yoMO3ft2qhm+5nOjVQu442S9kpu76qYRGt+plzdnHc0OM94+ufSuK0k9BrxhYVEghxOTIFI52lET9XD0JdOHZuilqgH1zw7mB6sLqCuUAkW9YlfavW4xiVAT5Cc/143mD6Kv4yv4VSPVq2f5CvVFYoxEiFu4UWKJFYJ60kXEKljI3/JpEyq7jhCxIXQyirWAcmp0AbKchGOb9//9mRxyDX2vIMr7UCqyRqE6kE1FlPBY0JttkErB+Bzuj2f1aDDyGPOxs=
    # TF_firebase_pw
    - secure: lv3kBBQgOKi7tuuHnE9rGd19jy2pzoCqvan1hZAzC+kJ8zTOPfMZv11kT8IeDWoZWXFyyRIT7RSWbipT/DdVndLMex7kvRMOyP+3CZzGYiwcpEhcBp014E4KhZLEmh9afCTpUNp4iLZJOWbHhssGm9/CGC8qD3dlnozkOVGHG3S50zRNad4g78NRe2EJF/aJdQTLghzqeFf3Em4oLSIQjMF1NPUfrzBkW73AcUHrk7oylb57gxavWf3IPUF+8dAhfni5BXiVXO5Y2MQr7w1PZyrSabm2X+4ZCmFi+hwkk82JdR2k69YgquOG4wLsIRkuieJt94p2pM7AEjXIkedUwEJ7RhOCGyQOQxG/fGGnpMQRj/2284bVL+geK+lbeU2Bci7DGVw556q1X6K3ALKBYSw4r6+aocaio9GFAwfAOg7BPhk26hHE7MpyKYKCj/tKp8mEv+CqwM04S2otAmF9xWkbnoYs1vfNj/53O7GRZbe0EUVP2vki8ExlK/YCAXc2GmvRZVeW8Ww8iUZJPYPaeAdw6w+qfSaq/1ckmVoj7PMJl2S7kw8BU2CwRo/04/u1D2gBLZX/o8SHlfk+JZ+MgBaJYNuFKUEaVgTJYqDnQNoRV+LoestE3REB+yhEuckXgLHY+VDJsaMD+pMeUSNmJVsMUBDh/JAF12+mQ3DBiSg=
