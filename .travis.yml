language: node_js
node_js:
  - "4.1"

before_install:
  - npm install -g gulp
  - gulp -v
  - wget https://releases.hashicorp.com/terraform/0.9.0/terraform_0.9.0_linux_amd64.zip -O /tmp/terraform.zip
  - sudo unzip -d /usr/local/bin/ /tmp/terraform.zip

install:
  - npm install

script:
  - gulp build
  - terraform init infra
  - terraform apply -var 'lambda_zip=dist/lambda.zip' -var 'wallet_pw=$WALLET_PASSWORD' -var 'wallet_merchant=$WALLET_MERCHANT' -var 'firebase_user=$FIREBASE_USER' - var 'firebase_pw=$FIREBASE_PW' infra

env:
  global:
    - secure: U+PDZEiYCAS6U1vFtbdB9XtgNjwYrUue14QWd5FTu5KznemGNH9XyZy6J/eR3YzZKyPP7x3NtLXa85d9gOZ7eWo+qx8a6IjmZjKPaAEiQ78dSipEv+mFFMvBI3ZjZ8pdTqzYDkvCViXr+89KffqfFS43vPgVYDxFfzwat9fUMvnb08FPiHfaIlkPmmiuXaW2rwQrVYHy0w/vba3OJlNCJIjfxdwg7BH5bNNKDSupmnRq1SomROOhBVIh110YgYxGrkkPemjyK6fEhvHreOWiWvd0IZmUlwqMu8P6QrgJuxlY/2sdozTdkw/zXKHRU1aeZ3A0IOzodmDS4Uc157eLZXAwL4bMwk0TJ4PGNx/KjLbPwC/ujOpNU7POAv+72zoeiJy5wI1OA59yYvw5BaB982/NeMz2xOdxODKAc6K+Kp08vIx12NLjpSwLi8NyuLI/NkaAGHmPPRm64Ea7qRMvO3xULxBtVU6iJeWsb1n802iF2T7EnT3s0s51WL/nXXqZRqvqGLbFWz27PLE6naRhbAMrLlYXNU274gNhgMiNCqm4e8DJAQiMewHm1d4bCVrjtPXI3wh5Vb0u9XZa29DMqgiXQxl4qqRqlgYKpN5jYDEOqQ2qXomG06jgaTqBO2vZ5Y0I6jVkKjRNGSdKyEcMawtyD3LWRVar2Jxyk7ebOaI=
    - secure: ieyXK5UW+hOEvZM4j/tVQcpi4ija/opXa+1HoIpwhrwLy77UvIiEXmFnT2zEFBex5a1RsZCvD4pL0LNSyphsTeAgNnYaj327xGAPhmv+ybVubg05D8LsZS2+fNuYlq2i8ce/QGWdN5surIY0neka4ydI6nPqqHAn5Yacx2mDxHYhAV9YHzdzvp2HqtRiE8MC7oRIpOAmrxSN79XSKObZbBP69B1lCKmZM4Hep6Lb4+rfx9r39xIFkEj2JvQGPe4wvseeXFolNXiB6xa0jeWQwVti6rNeUEVOlsVMdEdMOBUcjlpIdGpn2ZfDKdpPH5/3tu8MxJ+sozBw4Wh7CK7JiYJSOA/wzXSRT+QI9DtEFthxKZhej2kyjyHVrZod+Lzk7mI12FuGQIHGAbJpRGyOeRYt5S8IEEVbecP2efU51en4mzyX5soTjkLh0cx7ja8toiMMsDrfiFKYh0s4m/QN6jKrsZuFQctOvS6e7wj4dxi4xNiNuaKLfqlWd1LVc1S9Xfm7LpPUNleunzQfUkyJ6K1mxHWMl/PUJ5krSW3W+R6cs5qo8dSCZUVKPHHTPO+RtNrERlsHaHXCsFe8XhVWGxfsZWVJwvPDseXahFjIUXiEktFuXeSrbcg92PSmIWjlC94zsIMstDd3KG1XUFy56+U+x15lsmtG3J6zf0pweT4=
    # WALLET_PASSWORD
    - secure: gYTUXcrOLl1xd6mThbEIoCXxG+/2yIjDUK5wWW+waAczsvr4Aja8MoixPHKiEDG1qkQa0vsMyxqkbBV/W3PV9Phj98ATCSWoOvy8k3KgLLFnmqlcCb1CK0X1jAMTCOkRbGM8hP5kctW+1rj7NEchNKlo+7cWFQkuihPcfnZy4o8WQ9+UDBAOqOp7pv/NbIDotX958fctV9sjUdfTOsvt83ZOqWWnESJcmIrGscE9+z/zOC0tbuKqrE12z/D0WO0r5ev+oAlYGH2duD5uMqXHAWbyq+W3mQif0ubCSvZPbBrsALQbHNqQ5QMakW85WqFJAmpybjgKujDN0jBimQc7CyECWWpHoEbNQrVRUGEbA2x9UZeeKm8fMi7DQT8gRq0t9wdZ7DF/fMbMANsMW4o6XXwZWynf+GFPtDDq9biVLPytRQaMjHpkpygagni+GZ2o4F9Gb0c+Y2bnC/CLpLafNoXRXdjiXVjaFJnA6M1IlxGuR8jBxtN6h+g4D0Z3iVaFolw9wuvjkN8g7drnlpWfFV/v8sS/wB2n+7npov/7o/+3AgQ8qUBis+b6LHJuF5HhsA1AgNqdn79Z14wY+Y4POGd+taUBuDfpTqfzFjNKqg5rmS7XC3EqAbn/WK3iT6Gg5QGRat110+s111JpnItMqMrJ5dsZ0cya/hQr3B7vfH0=
    # WALLET_MERCHANT
    - secure: Q5wgzu72tcKHYy1VAFTgR7RfdEzJ+JJm5aRSd8koZPGJ6gr6TQG5vVr+UYYSLYXgT3xPZL4NoPc5fPmXGYRSQxK3W4ilAkQWD8cUNgUoSEzrM8LcTBxPJsPvgC0O3/uyJYL9oaVBMjIsS3Zqc+maTzUAJYDprE1S4zxLP091vo0ezZXVM7Qce6g+Tvy5yGKClZA0Nnf+w5QsnwUFXP6prM/InxtxpIx/VP2rjBs8Yp+uAsnATHtrMgmibWdkTKMNgsq68Pl/maB9TkBbrgKn4klZpzhoo1w/HGI5HEepMNGh/IYx37HtgTgeY6l4NuxdGgcgDymtmrBc316YzuZyrIauDqHlpOqRjKN6rHBoojizPyV9f0ZLAocjRv3iwEDcEMF987iMuzX8hvosO/iBmGXObYarat/h7d5s9LnaFnwPhYOF+ndljiEIhlUg2M6wuMScZ4XMqcvNoqldiGXiEtWTj3u2zvKTt2I4hiJVfpt6j2cLoP7/Am8VKhB8k/tPrRsYzaYoVxuCNy/wIYzx/PYPVkfJ3rrQCAslu4npUd33Kh7g+tCYP0h8jt5xVq2LIw6AkeXj8F/wMZSUg1x1Fzdr83K3m0rpAzax2tH/yMC+mdf3NhzRp9s+5kYWzWx23KbrC6NwkJ1/VJh16Tlw5wHF/enCxVRVACpr4EiM1Yg=
    # FIREBASE_USER
    - secure: ksAsuJKX84s3Hf0YVYxUq/CuSA0xtK68WwAPyarvrdhkqrAPzqIJ9LSfBqdycmJ/SQDyP4T852o1ShIZsdsC3qtQDO5ohZDVAGVEfG1rOgKcg7WeqKCN2hj0lSM1cJEg/Z/ogUAYUGKOIvAh/AVVCoBTtvTsGxJD8viiDmqAxaOf1g8lWIrHfgmnQi5PI9v9+gc8QC1Yp4RLFwYYgBDy4JEBWqIVAwLL5pbHiI/X6xf9SZ75h00c5FkGwiOTfGG0QHkl3dtWTQMS7Kj27rnWraGoBn7ZNKyluO5JALFFfboJPzkpMZSxLtv3aPyDBD1OwCrXAwfxUE210bMlxlWDue1r1enGtemImwtvWy5cMDcmgvb9AGmxqjRTx/W8g6Or3uybMbfrfy++OLOO+VEW1YNfJ8K/tY42ArGY0md40+1sjtPP3Zlu2q+Ss5uqofvaLUiiO0K3QwED/9UjML5GnsXN24SuGRCyNYUh7ib3KOjOMHU/D0Wdlc7xYXsvgXqs8NQc+p1snUb0n/DU6N2ceOxnDdK6FHmi5Nxvv+xW8tlq768iTv5rlUraRMd7PgSXQXwkyVEafgt9pvHtHHIe0R2sPMQ+Aoz3MibzInXK+bAzmSYqRmopGTwsCzmurjwe0s2/mE4O0yIr+ZuMUe80aNqDmi+eZ+LkJHPwytnt9WE=
    # FIREBASE_PW
    - secure: myU16Uh20FsTWbT/oRPc/W3fJW7hEcyIncAjlINTbop0WriIyTQLDJqiC3VxfywYbixJEWKpIkt9tIdiL3VAFVG+RtB32FIqHAyc+kgRXIccy+cJBJSIWJjpd3uRfSL6+prXeVGIlKvHscR4CuVUzw6GtJLX6cUApidIMzKbP33UWRzOcOIhrOc31I9im1bDszcpuI5bMt0KGVTBRj2fgpm3PCgPdq2s+R+oVQiQeu69VMJnVajQYwfAshLxTAL8KhSK/rCvQy1zDuJBviKVNYjIKT/8kywrqmBxdRXerVXd695b1/HyUCrih3Wif7ubiBFIxcqS16kEwdOTCs3Tc74vLufHcd4trLl2CI719k1Aonshgz/MY2Kkj8ob4GEGnOFj5EADUuhNa+jyy8y4Mx1uLtOzIdMqsTEtGPVeXQN8wIS7gsvTcctZwiZdse6iM0JucdMXX49p28xFvE4KjzaseXXGT+Kgy4PHsDSVCjCAjGuZ6XTCSxbNvcZdapEjayeOya+wOKbXJCBegYDP0SG/+6UtvDHbaMUWBeLEw1LwTxm53e8uElsi2ebgHkwVQZ+PVWGez844eem38ZSMRSeLB/n/jypkgMseASuzeawAU3fGnf1CRvzfPI8QklqtU1K9KP0M8SgnKMg2z8S/y1wLbF8gbGkbA9ubF3G5p2w=
